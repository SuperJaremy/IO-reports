# Лабораторная работа 2

**Название:** "Разработка драйверов блочных устройств"

**Цель работы:** получить знания и навыки разработки драйверов блочных устройств для операционной системы Linux. 

## Описание функциональности драйвера

Драйвер создаёт виртуальный жёсткий диск в оперативной памяти ёмкостью 50 MiB. Диск содержит 3 первичных раздела с размерами 10, 25 и 15 MiB.

## Инструкция по сборке

`$make`  
`$make do`

## Инструкция пользователя

- После загрузки модуля появится новый файлы /dev/mydisk и /dev/mydisk[1-3]
- В списке блочных устройств появятся 4 новых записи
![Список блочных устройств](https://github.com/SuperJaremy/IO-reports/blob/master/lab2/examples/example2_1.png)

## Примеры использования

`# mkfs.vfat /dev/mydisk1` - создать файловую систему vfat на разделе mydisk1 диска  
`# mount -t vfat /dev/mydisk1 \<dir\>` - смонтировать файловую систему в директорию *dir*  
![Смонтированные файловые системы](https://github.com/SuperJaremy/IO-reports/blob/master/lab2/examples/example2_2.png)

## Тест скорости передачи разделов
### Методика тестирования
- Было проведено копирование файла с каждого раздела на каждый и с каждого в домашнюю директорию на sda.
- Копирование проводилось при помощи команды `rsync --progress \<source\> \<dest\>`
- Для тестирования был использован файл размером 9 MiB
### Результат
mydisk1->mydisk2: __175.86MB/s__  
mydisk1->mydisk3: __179.38MB/s__  

mydisk2->mydisk1: __172.48MB/s__  
mydisk2->mydisk3: __183.04MB/s__ 

mydisk3->mydisk1: __190.82MB/s__  
mydisk3->mydisk2: __175.86MB/s__ 

mydisk1->sda: __194.97MB/s__  
mydisk2->sda: __190.82MB/s__  
mydisk3->sda: __186.85MB/s__  

- Средняя скорость передачи между разделами на диске: __179.57 MB/s__  
- Средняя скорость передачи на с mydisk на sda: __190.88 MB/s__
